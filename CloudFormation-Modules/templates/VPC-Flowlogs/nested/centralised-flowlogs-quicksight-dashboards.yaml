AWSTemplateFormatVersion: 2010-09-09
Description: ---
Metadata:
  AWS::CloudFormation::Interface:
    ParameterGroups:
      - Label:
          default: Athena/Quicksight Configuration
        Parameters:
          - pQuickSightUser
          - pVpcFlowLogsAthenaDatabase
      - Label:
          default: Tagging Configuration
        Parameters:
          - pTagEnvironment
          - pTagSDLC
          - pTagApplicationName
          - pTagApplicationRole
          - pTagCluster
          - pTagDataClassification
          - pTagCompliance
          - pTagDataRetention
          - pTagMapMigrated
          - pTagProjectName
          - pTagProductOwner
          - pTagTechnicalOwner
          - pTagCostCenter
          - pTagBusinessUnit
          - pTagBusinessImpact
          - pTagEscalationPath
          - pTagKnowledgeBase
          - pTagHoursOfOperation
          - pTagMaintenanceWindow
          - pTagBackupSchedule
          - pTagOptOut
          - pTagDeploymentMethod
Parameters:
  pQuickSightUser:
    Type: String
    Description: Amazon QuickSight Current Logged In User
  pVpcFlowLogsAthenaDatabase:
    Type: String
    Description: Athena database name where external table for VPC flow logs is created
  # Tags
  pTagEnvironment:
    Type: String
    Description: Select the Name of the Environment
    AllowedValues:
      - Production
      - Non-Production
  pTagSDLC:
    Type: String
    Description: Distinguish between SDLC Environments e.g., Dev, Test, SIT, UAT
    AllowedValues:
      - Sandbox
      - Development
      - UAT
      - Staging
      - Production
      - Shared Services
  pTagApplicationName:
    Type: String
    Description: Identify resources that are related to a specific application
  pTagApplicationRole:
    Type: String
    Description: Identify the function of a particular respource e.g., Web Server, Message Broker, Database Server
  pTagCluster:
    Type: String
    Description: Identify resource farms that share a common configuration and perform a specific function for an application
  pTagDataClassification:
    Type: String
    Description: Identify the specific data confidentiality level a resource supports
    AllowedValues:
      - Public
      - Private
      - Confidential
      - Restricted
    Default: Private
  pTagCompliance:
    Type: String
    Description: Identify the specific compliance requirements that resources must adhere to e.g., PCI-DSS, HIPAA, ISO27001
  pTagDataRetention:
    Type: String
    Description: Identify the data retention policy applied to the resources (S3, ECR, CloudWatch Logs, EC2 AMI, EBS Snapshots, RDS Snapshot)
    AllowedValues:
      - 1
      - 3
      - 5
      - 7
      - 14
      - 30
      - 60
      - 90
      - 120
      - 150
      - 180
      - 365
      - 400
      - 545
      - 731
      - 1827
      - 3653
  pTagMapMigrated:
    Type: String
    Description: Identify resources that have been migrated as part of the AWS Migration Acceleration Program (MAP) for funding purposes
  pTagProjectName:
    Type: String
    Description: Identify projects that the resource supports
  pTagProductOwner:
    Type: String
    Description: Identify who is commercially responsible for the resource
  pTagTechnicalOwner:
    Type: String
    Description: Identify who is technically responsible for the resource
  pTagCostCenter:
    Type: String
    Description: Identify the cost center associated with a resource, typically for cost allocation and tracking
  pTagBusinessUnit:
    Type: String
    Description: Identify the business unit associated with a resource, typically for cost allocation and tracking
  pTagBusinessImpact:
    Type: String
    Description: Identify the business impact associated with the resource
    AllowedValues:
      - Critical
      - High
      - Medium
      - Low
    Default: Medium
  pTagEscalationPath:
    Type: String
    Description: Identify the next point of contact for a resource in an incident e.g, DevOps Team, 3rd Party Company
  pTagKnowledgeBase:
    Type: String
    Description: Identifies the location for knowledge base articles/wikis for the resource
  pTagHoursOfOperation:
    Type: String
    Description: Identify the hours of operation for a resource e.g., 24*7, 06:00 - 22:00 Monday - Friday, 08:00 - 18:00 Monday - Friday
    AllowedValues:
      - 24x7
      - 16x5
      - 9x5
    Default: 24x7
  pTagMaintenanceWindow:
    Type: String
    Description: Identify the hours in which a resource is available for maintenance to occur
  pTagBackupSchedule:
    Type: String
    Description: Identify the backup schedule for a resource
  pTagOptOut:
    Type: String
    Description: Identify whether a resource should be excluded from maintenance activities e.g., True, False
    AllowedValues:
      - "True"
      - "False"
    Default: "False"
  pTagDeploymentMethod:
    Type: String
    Description: Identify the method by which resources are deployed
    AllowedValues:
      - CloudFormation
      - Terraform
      - Manual
    Default: CloudFormation
Resources:
  rVpcFlowLogsAthenaDatasource:
    Type: AWS::QuickSight::DataSource
    Properties:
      Type: ATHENA
      DataSourceId: myathena-datasource-01
      AwsAccountId: !Ref AWS::AccountId
      DataSourceParameters:
          AthenaParameters:
            "WorkGroup": "primary"
      Name: VPCFlowLogsDataset
      SslProperties:
        DisableSsl: false
      Tags:
        - Key: Name
          Value: !Sub flowlogs-datasource-${AWS::Region}-${AWS::AccountId}
        - Key: Environment
          Value: !Ref pTagEnvironment
        - Key: SDLC
          Value: !Ref pTagSDLC
        - Key: ApplicationName
          Value: !Ref pTagApplicationName
        - Key: ApplicationRole
          Value: !Ref pTagApplicationRole
        - Key: Cluster
          Value: !Ref pTagCluster
        - Key: DataClassification
          Value: !Ref pTagDataClassification
        - Key: Compliance
          Value: !Ref pTagCompliance
        - Key: DataRetention
          Value: !Ref pTagDataRetention
        - Key: map-migrated
          Value: !Ref pTagMapMigrated
        - Key: ProjectName
          Value: !Ref pTagProjectName
        - Key: ProductOwner
          Value: !Ref pTagProductOwner
        - Key: TechnicalOwner
          Value: !Ref pTagTechnicalOwner
        - Key: BusinessUnit
          Value: !Ref pTagBusinessUnit
        - Key: CostCenter
          Value: !Ref pTagCostCenter
        - Key: BusinessImpact
          Value: !Ref pTagBusinessImpact
        - Key: EscalationPath
          Value: !Ref pTagEscalationPath
        - Key: KnowledgeBase
          Value: !Ref pTagKnowledgeBase
        - Key: HoursOfOperation
          Value: !Ref pTagHoursOfOperation
        - Key: MaintenanceWindow
          Value: !Ref pTagMaintenanceWindow
        - Key: BackupSchedule
          Value: !Ref pTagBackupSchedule
        - Key: OptOut
          Value: !Ref pTagOptOut
        - Key: DeploymentMethod
          Value: !Ref pTagDeploymentMethod
  rVpcFlowLogsAthenaSummaryDataset:
    Type: AWS::QuickSight::DataSet
    Properties:
      AwsAccountId: !Ref AWS::AccountId
      Name: vpc_flow_logs_summary_view
      DataSetId: vpcflathena-summary-datasetid-01
      ImportMode: SPICE
      PhysicalTableMap:
        VPCFlowLogsPhysicalTableMap123:
          RelationalTable:
            DataSourceArn: !GetAtt rVpcFlowLogsAthenaDatasource.Arn
            Catalog: "AwsDataCatalog"
            Schema: !Ref pVpcFlowLogsAthenaDatabase
            Name: "vpc_flow_logs_summary_view"
            InputColumns:
              - Name: accountid
                Type: STRING
              - Name: interfaceid
                Type: STRING
              - Name: sourceaddress
                Type: STRING
              - Name: destinationaddress
                Type: STRING
              - Name: sourceport
                Type: INTEGER
              - Name: destinationport
                Type: INTEGER
              - Name: protocol
                Type: INTEGER
              - Name: numpackets
                Type: INTEGER
              - Name: numbytes
                Type: INTEGER
              - Name: action
                Type: STRING
              - Name: action_count
                Type: INTEGER
              - Name: logstatus
                Type: STRING
              - Name: log_status_count
                Type: INTEGER
              - Name: vpcid
                Type: STRING
              - Name: azid
                Type: STRING
              - Name: packetsourceaddr
                Type: STRING
              - Name: packetdestinationaddr
                Type: STRING
              - Name: region
                Type: STRING
              - Name: subnetid
                Type: STRING
              - Name: tcpflags
                Type: STRING
              - Name: tcp_flags
                Type: INTEGER
              - Name: tcp_flags_count
                Type: INTEGER
              - Name: flowdirection
                Type: STRING
              - Name: packetsrcawsservice
                Type: STRING
              - Name: packetdstawsservice
                Type: STRING
              - Name: trafficpath
                Type: STRING
              - Name: traffic_path
                Type: INTEGER
              - Name: iptype
                Type: STRING
      LogicalTableMap:
        VPCFlowLogsLogicalTableMap123:
          Alias: "vpc_flow_logs_summary_view"
          Source:
            PhysicalTableId: VPCFlowLogsPhysicalTableMap123
          DataTransforms:
            - TagColumnOperation:
                ColumnName: 'region'
                Tags:
                  - ColumnGeographicRole: STATE
            - ProjectOperation:
                ProjectedColumns:
                  - accountid
                  - interfaceid
                  - sourceaddress
                  - destinationaddress
                  - sourceport
                  - destinationport
                  - protocol
                  - numpackets
                  - numbytes
                  - action
                  - action_count
                  - logstatus
                  - log_status_count
                  - vpcid
                  - azid
                  - packetsourceaddr
                  - packetdestinationaddr
                  - region
                  - subnetid
                  - tcpflags
                  - tcp_flags
                  - tcp_flags_count
                  - flowdirection
                  - packetsrcawsservice
                  - packetdstawsservice
                  - trafficpath
                  - traffic_path
                  - iptype
      Permissions:
        - Principal: !Sub "arn:${AWS::Partition}:quicksight:us-east-1:${AWS::AccountId}:user/default/${pQuickSightUser}"
          Actions:
            - "quicksight:UpdateDataSetPermissions"
            - "quicksight:DescribeDataSet"
            - "quicksight:DescribeDataSetPermissions"
            - "quicksight:PassDataSet"
            - "quicksight:DescribeIngestion"
            - "quicksight:ListIngestions"
            - "quicksight:UpdateDataSet"
            - "quicksight:DeleteDataSet"
            - "quicksight:CreateIngestion"
            - "quicksight:CancelIngestion"
      Tags:
        - Key: Name
          Value: !Sub flowlogs-summary-dataset-${AWS::Region}-${AWS::AccountId}
        - Key: Environment
          Value: !Ref pTagEnvironment
        - Key: SDLC
          Value: !Ref pTagSDLC
        - Key: ApplicationName
          Value: !Ref pTagApplicationName
        - Key: ApplicationRole
          Value: !Ref pTagApplicationRole
        - Key: Cluster
          Value: !Ref pTagCluster
        - Key: DataClassification
          Value: !Ref pTagDataClassification
        - Key: Compliance
          Value: !Ref pTagCompliance
        - Key: DataRetention
          Value: !Ref pTagDataRetention
        - Key: map-migrated
          Value: !Ref pTagMapMigrated
        - Key: ProjectName
          Value: !Ref pTagProjectName
        - Key: ProductOwner
          Value: !Ref pTagProductOwner
        - Key: TechnicalOwner
          Value: !Ref pTagTechnicalOwner
        - Key: BusinessUnit
          Value: !Ref pTagBusinessUnit
        - Key: CostCenter
          Value: !Ref pTagCostCenter
        - Key: BusinessImpact
          Value: !Ref pTagBusinessImpact
        - Key: EscalationPath
          Value: !Ref pTagEscalationPath
        - Key: KnowledgeBase
          Value: !Ref pTagKnowledgeBase
        - Key: HoursOfOperation
          Value: !Ref pTagHoursOfOperation
        - Key: MaintenanceWindow
          Value: !Ref pTagMaintenanceWindow
        - Key: BackupSchedule
          Value: !Ref pTagBackupSchedule
        - Key: OptOut
          Value: !Ref pTagOptOut
        - Key: DeploymentMethod
          Value: !Ref pTagDeploymentMethod
  rVpcFlowLogsAthenaDailyDataset:
    Type: AWS::QuickSight::DataSet
    Properties:
      AwsAccountId: !Ref AWS::AccountId
      Name: vpc_flow_logs_daily_view
      DataSetId: myathena-daily-datasetid-01
      ImportMode: DIRECT_QUERY
      PhysicalTableMap:
        VPCFlowLogsPhysicalTableMap123:
          RelationalTable:
            DataSourceArn: !GetAtt rVpcFlowLogsAthenaDatasource.Arn
            Catalog: "AwsDataCatalog"
            Schema: !Ref pVpcFlowLogsAthenaDatabase
            Name: "vpc_flow_logs_daily_view"
            InputColumns:
              - Name: accountid
                Type: STRING
              - Name: interfaceid
                Type: STRING
              - Name: sourceaddress
                Type: STRING
              - Name: destinationaddress
                Type: STRING
              - Name: sourceport
                Type: INTEGER
              - Name: destinationport
                Type: INTEGER
              - Name: protocol
                Type: INTEGER
              - Name: numpackets
                Type: INTEGER
              - Name: numbytes
                Type: INTEGER
              - Name: starttime
                Type: INTEGER
              - Name: endtime
                Type: INTEGER
              - Name: action
                Type: STRING
              - Name: action_count
                Type: INTEGER
              - Name: logstatus
                Type: STRING
              - Name: vpcid
                Type: STRING
              - Name: azid
                Type: STRING
              - Name: packetsourceaddr
                Type: STRING
              - Name: packetdestinationaddr
                Type: STRING
              - Name: region
                Type: STRING
              - Name: subnetid
                Type: STRING
              - Name: tcpflags
                Type: STRING
              - Name: tcp_flags
                Type: INTEGER
              - Name: flowdirection
                Type: STRING
              - Name: trafficpath
                Type: STRING
              - Name: traffic_path
                Type: INTEGER
              - Name: iptype
                Type: STRING
              - Name: startday
                Type: INTEGER
              - Name: startmonth
                Type: INTEGER
              - Name: endday
                Type: INTEGER
              - Name: endmonth
                Type: INTEGER
      LogicalTableMap:
        VPCFlowLogsLogicalTableMap123:
          Alias: "vpc_flow_logs_daily_view"
          Source:
            PhysicalTableId: VPCFlowLogsPhysicalTableMap123
          DataTransforms:
            - TagColumnOperation:
                ColumnName: 'region'
                Tags:
                  - ColumnGeographicRole: STATE
            - ProjectOperation:
                ProjectedColumns:
                  - accountid
                  - interfaceid
                  - sourceaddress
                  - destinationaddress
                  - sourceport
                  - destinationport
                  - protocol
                  - numpackets
                  - numbytes
                  - starttime
                  - endtime
                  - action
                  - action_count
                  - logstatus
                  - vpcid
                  - azid
                  - packetsourceaddr
                  - packetdestinationaddr
                  - region
                  - subnetid
                  - tcpflags
                  - tcp_flags
                  - flowdirection
                  - trafficpath
                  - traffic_path
                  - iptype
                  - startday
                  - startmonth
                  - endday
                  - endmonth
      Permissions:
        - Principal: !Sub "arn:${AWS::Partition}:quicksight:us-east-1:${AWS::AccountId}:user/default/${pQuickSightUser}"
          Actions:
            - "quicksight:UpdateDataSetPermissions"
            - "quicksight:DescribeDataSet"
            - "quicksight:DescribeDataSetPermissions"
            - "quicksight:PassDataSet"
            - "quicksight:DescribeIngestion"
            - "quicksight:ListIngestions"
            - "quicksight:UpdateDataSet"
            - "quicksight:DeleteDataSet"
            - "quicksight:CreateIngestion"
            - "quicksight:CancelIngestion"
      Tags:
        - Key: Name
          Value: !Sub flowlogs-daily-dataset-${AWS::Region}-${AWS::AccountId}
        - Key: Environment
          Value: !Ref pTagEnvironment
        - Key: SDLC
          Value: !Ref pTagSDLC
        - Key: ApplicationName
          Value: !Ref pTagApplicationName
        - Key: ApplicationRole
          Value: !Ref pTagApplicationRole
        - Key: Cluster
          Value: !Ref pTagCluster
        - Key: DataClassification
          Value: !Ref pTagDataClassification
        - Key: Compliance
          Value: !Ref pTagCompliance
        - Key: DataRetention
          Value: !Ref pTagDataRetention
        - Key: map-migrated
          Value: !Ref pTagMapMigrated
        - Key: ProjectName
          Value: !Ref pTagProjectName
        - Key: ProductOwner
          Value: !Ref pTagProductOwner
        - Key: TechnicalOwner
          Value: !Ref pTagTechnicalOwner
        - Key: BusinessUnit
          Value: !Ref pTagBusinessUnit
        - Key: CostCenter
          Value: !Ref pTagCostCenter
        - Key: BusinessImpact
          Value: !Ref pTagBusinessImpact
        - Key: EscalationPath
          Value: !Ref pTagEscalationPath
        - Key: KnowledgeBase
          Value: !Ref pTagKnowledgeBase
        - Key: HoursOfOperation
          Value: !Ref pTagHoursOfOperation
        - Key: MaintenanceWindow
          Value: !Ref pTagMaintenanceWindow
        - Key: BackupSchedule
          Value: !Ref pTagBackupSchedule
        - Key: OptOut
          Value: !Ref pTagOptOut
        - Key: DeploymentMethod
          Value: !Ref pTagDeploymentMethod
  rVpcFlowLogsAthenaEnhancedDataset:
    Type: AWS::QuickSight::DataSet
    Properties:
      AwsAccountId: !Ref AWS::AccountId
      Name: vpc_flow_logs_enhanced_view
      DataSetId: myathena-enh-datasetid-01
      ImportMode: DIRECT_QUERY
      PhysicalTableMap:
        VPCFlowLogsPhysicalTableMap123:
          RelationalTable:
            DataSourceArn: !GetAtt rVpcFlowLogsAthenaDatasource.Arn
            Catalog: "AwsDataCatalog"
            Schema: !Ref pVpcFlowLogsAthenaDatabase
            Name: "vpc_flow_logs_enhanced_view"
            InputColumns:
              - Name: accountid
                Type: STRING
              - Name: sourceaddress
                Type: STRING
              - Name: destinationaddress
                Type: STRING
              - Name: numpackets
                Type: INTEGER
              - Name: numbytes
                Type: INTEGER
              - Name: vpcid
                Type: STRING
              - Name: azid
                Type: STRING
              - Name: packetsourceaddr
                Type: STRING
              - Name: packetdestinationaddr
                Type: STRING
              - Name: region
                Type: STRING
              - Name: subnetid
                Type: STRING
              - Name: flowdirection
                Type: STRING
              - Name: packetsrcawsservice
                Type: STRING
              - Name: packetdstawsservice
                Type: STRING
              - Name: trafficpath
                Type: STRING
              - Name: traffic_path
                Type: INTEGER
      LogicalTableMap:
        VPCFlowLogsLogicalTableMap123:
          Alias: "vpc_flow_logs_enhanced_view"
          Source:
            PhysicalTableId: VPCFlowLogsPhysicalTableMap123
          DataTransforms:
            - TagColumnOperation:
                ColumnName: 'region'
                Tags:
                  - ColumnGeographicRole: STATE
            - ProjectOperation:
                ProjectedColumns:
                  - accountid
                  - sourceaddress
                  - destinationaddress
                  - numpackets
                  - numbytes
                  - vpcid
                  - azid
                  - packetsourceaddr
                  - packetdestinationaddr
                  - region
                  - subnetid
                  - flowdirection
                  - packetsrcawsservice
                  - packetdstawsservice
                  - trafficpath
                  - traffic_path
      Permissions:
        - Principal: !Sub "arn:${AWS::Partition}:quicksight:us-east-1:${AWS::AccountId}:user/default/${pQuickSightUser}"
          Actions:
            - "quicksight:UpdateDataSetPermissions"
            - "quicksight:DescribeDataSet"
            - "quicksight:DescribeDataSetPermissions"
            - "quicksight:PassDataSet"
            - "quicksight:DescribeIngestion"
            - "quicksight:ListIngestions"
            - "quicksight:UpdateDataSet"
            - "quicksight:DeleteDataSet"
            - "quicksight:CreateIngestion"
            - "quicksight:CancelIngestion"
      Tags:
        - Key: Name
          Value: !Sub flowlogs-enhanced-dataset-${AWS::Region}-${AWS::AccountId}
        - Key: Environment
          Value: !Ref pTagEnvironment
        - Key: SDLC
          Value: !Ref pTagSDLC
        - Key: ApplicationName
          Value: !Ref pTagApplicationName
        - Key: ApplicationRole
          Value: !Ref pTagApplicationRole
        - Key: Cluster
          Value: !Ref pTagCluster
        - Key: DataClassification
          Value: !Ref pTagDataClassification
        - Key: Compliance
          Value: !Ref pTagCompliance
        - Key: DataRetention
          Value: !Ref pTagDataRetention
        - Key: map-migrated
          Value: !Ref pTagMapMigrated
        - Key: ProjectName
          Value: !Ref pTagProjectName
        - Key: ProductOwner
          Value: !Ref pTagProductOwner
        - Key: TechnicalOwner
          Value: !Ref pTagTechnicalOwner
        - Key: BusinessUnit
          Value: !Ref pTagBusinessUnit
        - Key: CostCenter
          Value: !Ref pTagCostCenter
        - Key: BusinessImpact
          Value: !Ref pTagBusinessImpact
        - Key: EscalationPath
          Value: !Ref pTagEscalationPath
        - Key: KnowledgeBase
          Value: !Ref pTagKnowledgeBase
        - Key: HoursOfOperation
          Value: !Ref pTagHoursOfOperation
        - Key: MaintenanceWindow
          Value: !Ref pTagMaintenanceWindow
        - Key: BackupSchedule
          Value: !Ref pTagBackupSchedule
        - Key: OptOut
          Value: !Ref pTagOptOut
        - Key: DeploymentMethod
          Value: !Ref pTagDeploymentMethod
  rVpcFlowLogsQuickSightDashboard:
    Type: AWS::QuickSight::Dashboard
    DependsOn: rVpcFlowLogsAthenaSummaryDataset
    Properties:
      AwsAccountId: !Ref AWS::AccountId
      DashboardId: 'vpc_flow_logs_analysis_dashboard'
      Name: 'VPC Flow Logs Analysis Dashboard integrated with AWS VPC Service'
      Permissions:
        - Principal: !Sub "arn:${AWS::Partition}:quicksight:us-east-1:${AWS::AccountId}:user/default/${pQuickSightUser}"
          Actions:
            - "quicksight:DescribeDashboard"
            - "quicksight:ListDashboardVersions"
            - "quicksight:UpdateDashboardPermissions"
            - "quicksight:QueryDashboard"
            - "quicksight:UpdateDashboard"
            - "quicksight:DeleteDashboard"
            - "quicksight:DescribeDashboardPermissions"
            - "quicksight:UpdateDashboardPublishedVersion"
      SourceEntity:
        SourceTemplate:
          DataSetReferences:
            - DataSetPlaceholder: 'vpc_flow_logs_summary_view'
              DataSetArn: !GetAtt 'rVpcFlowLogsAthenaSummaryDataset.Arn'
            - DataSetPlaceholder: 'vpc_flow_logs_daily_view'
              DataSetArn: !GetAtt 'rVpcFlowLogsAthenaDailyDataset.Arn'
            - DataSetPlaceholder: 'vpc_flow_logs_enhanced_view'
              DataSetArn: !GetAtt 'rVpcFlowLogsAthenaEnhancedDataset.Arn'
          Arn: !Sub 'arn:${AWS::Partition}:quicksight:us-east-1:869004330191:template/vpc-flow-logs-analysis-enhanced-template-v7'
      Tags:
        - Key: Name
          Value: !Sub flowlogs-dashboard-${AWS::Region}-${AWS::AccountId}
        - Key: Environment
          Value: !Ref pTagEnvironment
        - Key: SDLC
          Value: !Ref pTagSDLC
        - Key: ApplicationName
          Value: !Ref pTagApplicationName
        - Key: ApplicationRole
          Value: !Ref pTagApplicationRole
        - Key: Cluster
          Value: !Ref pTagCluster
        - Key: DataClassification
          Value: !Ref pTagDataClassification
        - Key: Compliance
          Value: !Ref pTagCompliance
        - Key: DataRetention
          Value: !Ref pTagDataRetention
        - Key: map-migrated
          Value: !Ref pTagMapMigrated
        - Key: ProjectName
          Value: !Ref pTagProjectName
        - Key: ProductOwner
          Value: !Ref pTagProductOwner
        - Key: TechnicalOwner
          Value: !Ref pTagTechnicalOwner
        - Key: BusinessUnit
          Value: !Ref pTagBusinessUnit
        - Key: CostCenter
          Value: !Ref pTagCostCenter
        - Key: BusinessImpact
          Value: !Ref pTagBusinessImpact
        - Key: EscalationPath
          Value: !Ref pTagEscalationPath
        - Key: KnowledgeBase
          Value: !Ref pTagKnowledgeBase
        - Key: HoursOfOperation
          Value: !Ref pTagHoursOfOperation
        - Key: MaintenanceWindow
          Value: !Ref pTagMaintenanceWindow
        - Key: BackupSchedule
          Value: !Ref pTagBackupSchedule
        - Key: OptOut
          Value: !Ref pTagOptOut
        - Key: DeploymentMethod
          Value: !Ref pTagDeploymentMethod